# Billing System For Avito

## **:zap:Quick start**

Для начала, [скачайте](https://go.dev/dl/) и установите **Go**. Версии ```1.17``` или выше.

Затем создайте новую директорию, откройте **консоль** и введите **команду**:
```markdown
cd __path_to_dir__
```

Установка производится с помощью команды **git clone** или скачивания архива из репозитория **Download ZIP**:
```
git clone https://github.com/thaessaep/billingSystem.git
```
Затем, в консоли перейдите в папку **deployments** и введите команду:
```
make build
```

## **:whale:Docker-way to quick start**
Для быстрого развертывания среды в Docker следуйте всем инструкциям выше, но вместо **~~make build~~** введите команду:
```
make docker-compose
```

## :card_index: Database
Для решения задачи была выбрана база данных **PostgreSQL**

## :envelope: Примеры запросов/ответов
Все примеры описаны в файле **Tests.postman_collection.json**

## :pager: Swagger
Swagger-документация расположена в папке **docs**

## :money_with_wings: Сценарий разрезервирования денег
+ Сценарий реализован с помощью ___дополнительного поля success___ с типом **bool**
+ Для **резервирования денег** допускается отправка запрос **без поля** _success_

## :question: Вопросы, возникшие во время выполнения ТЗ
1. ___Нужно ли делать отдельные таблицы для заказов, услуг___
	+ Так как информацию о наименовании и др. параметров услуг и заказов хранить не нужно, то было решено создать одну таблицу **reserve_bills**, 
	которая хранит ___user_id___ как **Внешний ключ** и остальные поля соответственно.
	```
	Если бы таблицы требовалось заполнять подобными данными, то таблицы требовалось бы создать и связать их по id
	```
2. ___Метод признания выручки принимает **точно такие же поля**, как и резервирование средств___
	+ Для решения этого вопроса было предпринято решение проверять поле __success__ в таблице **reserve_bills**
		1. Если **поле пустое**, тогда проверяется передаётся ли в запросе __success__. При наличии __success__ база данных заполняется по значению этого поля, в обратном случае __success__ будет имеет стандартное значение **true**
		2. Если поле заполнено, тогда отправляется информация о том, что эта операция уже была выполнена.

## Доп. задание 1:
+ Метод получения месячного отчета был реализован как и все остальные в формате json